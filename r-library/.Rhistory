citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
echo = FALSE,
warning = FALSE,
message = FALSE,
error = TRUE
)
here::i_am("vignettes/appendix-C-incidence-and-growth-rate-estimation.Rmd")
source(here::here("vignettes/common-setup.R"))
locfitEstimator = function(deg,win) {
return(function(ts, infectivityProfile) {
locfitGrowthEstimate(ts, degree = deg, window = win)
})
}
# each estimator function must take a single time series and a single infectivity_profile object and produce a single
# time series of the estimates. The input time-series will have a "date" and a "value" column.
estimators = tibble(
model = forcats::as_factor(c(
"Degree 2; Window 14",
"Degree 2; Window 21",
"Degree 1; Window 14",
"Degree 1; Window 21"
)),
estimFn = c(
locfitEstimator(2,14),
locfitEstimator(2,21),
locfitEstimator(1,14),
locfitEstimator(1,21)
)
)
lagAnalysisResult = lagAnalysis(estimators, estimation="Growth")
qualityEstimates = syntheticEstimates(estimators)
qualityAnalysisResult = validationMetrics(qualityEstimates, modelLag=lagAnalysisResult$modelLag, estimation="Growth",criticalValue = 0)
locfitGrowthEstimate
calculateResult
formatResult
devtools::install()
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
echo = FALSE,
warning = FALSE,
message = FALSE,
error = TRUE
)
here::i_am("vignettes/appendix-C-incidence-and-growth-rate-estimation.Rmd")
source(here::here("vignettes/common-setup.R"))
locfitEstimator = function(deg,win) {
return(function(ts, infectivityProfile) {
locfitGrowthEstimate(ts, degree = deg, window = win)
})
}
# each estimator function must take a single time series and a single infectivity_profile object and produce a single
# time series of the estimates. The input time-series will have a "date" and a "value" column.
estimators = tibble(
model = forcats::as_factor(c(
"Degree 2; Window 14",
"Degree 2; Window 21",
"Degree 1; Window 14",
"Degree 1; Window 21"
)),
estimFn = c(
locfitEstimator(2,14),
locfitEstimator(2,21),
locfitEstimator(1,14),
locfitEstimator(1,21)
)
)
lagAnalysisResult = lagAnalysis(estimators, estimation="Growth")
qualityEstimates = syntheticEstimates(estimators)
qualityAnalysisResult = validationMetrics(qualityEstimates, modelLag=lagAnalysisResult$modelLag, estimation="Growth",criticalValue = 0)
jepidemic:::formatResult
formatResult
ukcovidtools::formatResult
citr:::insert_citation()
?latex_document
?ggplot2::layer
stat_quantile
ggplot2::stat_quantile
ggplot2::StatQuantile
?functional::Curry
?functional::Compose
devtools::document()
pkgdown::build_site()
?nakagami
??nakagami
devtools::load_all()
knitr::opts_chunk$set(
collapse = TRUE
)
here::i_am("vignettes/getting-started.Rmd")
source(here::here("vignettes/common-setup.R"))
test = jepidemic::vignetteDataset$ts  %>% filter(bootstrap==2, observationDate==max(observationDate))
infProf = jepidemic::vignetteDataset$infectivityProfile
ggplot(test)+
geom_bar(mapping=aes(x=date,y=import), stat="identity",fill="blue")+
geom_line(mapping=aes(x=date,y=Est.actual), colour="red")+
geom_point(mapping=aes(x=date,y=value), size=0.1, colour="black")
devtools::load_all("~/Git/ggrrr/")
devtools::load_all("~/Git/ggrrr/")
knitr::opts_chunk$set(
collapse = TRUE
)
here::i_am("vignettes/getting-started.Rmd")
source(here::here("vignettes/common-setup.R"))
test = jepidemic::vignetteDataset$ts  %>% filter(bootstrap==2, observationDate==max(observationDate))
infProf = jepidemic::vignetteDataset$infectivityProfile
ggplot(test)+
geom_bar(mapping=aes(x=date,y=import), stat="identity",fill="blue")+
geom_line(mapping=aes(x=date,y=Est.actual), colour="red")+
geom_point(mapping=aes(x=date,y=value), size=0.1, colour="black")
ggplot(test, aes(y=Fraction.observed,x=date))+geom_bar()+ggrrr::gg_hide_Y_axis()
ggplot(test, aes(y=Fraction.observed,x=date))+geom_bar(stat=identity)+ggrrr::gg_hide_Y_axis()
ggplot(test, aes(y=Fraction.observed,x=date))+geom_bar(stat="identity")+ggrrr::gg_hide_Y_axis()
ggplot(test, aes(y=Fraction.observed,x=date))+geom_line()+ggrrr::gg_hide_X_axis()
a = ggplot(test)+
geom_bar(mapping=aes(x=date,y=import), stat="identity",fill="blue")+
geom_line(mapping=aes(x=date,y=Est.actual), colour="red")+
geom_point(mapping=aes(x=date,y=value), size=0.1, colour="black")
b = ggplot(test, aes(y=Fraction.observed,x=date))+geom_line()+ggrrr::gg_hide_X_axis()+ylab("P(obs)")
b+a+patchwork::plot_layout(ncol=1,heights = c(1,7))
test = jepidemic::vignetteDataset$ts  %>% filter(observationDate==max(observationDate))
infProf = jepidemic::vignetteDataset$infectivityProfile
a = ggplot(test)+
geom_bar(mapping=aes(x=date,y=import), stat="identity",fill="blue")+
geom_line(mapping=aes(x=date,y=Est.actual), colour="red")+
geom_point(mapping=aes(x=date,y=value), size=0.1, colour="black")
b = ggplot(test, aes(y=Fraction.observed,x=date))+geom_line()+ggrrr::gg_hide_X_axis()+ylab("P(obs)")
b+a+patchwork::plot_layout(ncol=1,heights = c(1,7))
a = ggplot(test)+
geom_bar(mapping=aes(x=date,y=import), stat="identity",fill="blue")+
geom_line(mapping=aes(x=date,y=Est.actual), colour="red")+
geom_point(mapping=aes(x=date,y=value), size=0.1, colour="black")+
geom_line(mapping=aes(x=date,y=value), size=0.1, colour="black",alpha=0.1)
b = ggplot(test, aes(y=Fraction.observed,x=date))+geom_line()+ggrrr::gg_hide_X_axis()+ylab("P(obs)")
b+a+patchwork::plot_layout(ncol=1,heights = c(1,7))
a = ggplot(test)+
geom_bar(mapping=aes(x=date,y=import), stat="identity",fill="blue")+
geom_line(mapping=aes(x=date,y=Est.actual), colour="red")+
geom_point(mapping=aes(x=date,y=value), size=0.1, colour="black")+
geom_line(mapping=aes(x=date,y=value,group=bootstrap), size=0.1, colour="black",alpha=0.1)
b = ggplot(test, aes(y=Fraction.observed,x=date))+geom_line()+ggrrr::gg_hide_X_axis()+ylab("P(obs)")
b+a+patchwork::plot_layout(ncol=1,heights = c(1,7))
a = ggplot(test)+
geom_bar(mapping=aes(x=date,y=import), stat="identity",fill="blue")+
geom_line(mapping=aes(x=date,y=Est.actual), colour="red")+
#geom_point(mapping=aes(x=date,y=value), size=0.1, colour="black")+
geom_line(mapping=aes(x=date,y=value,group=bootstrap), size=0.1, colour="black",alpha=0.2)
b = ggplot(test, aes(y=Fraction.observed,x=date))+geom_line()+ggrrr::gg_hide_X_axis()+ylab("P(obs)")
b+a+patchwork::plot_layout(ncol=1,heights = c(1,7))
a = ggplot(test)+
geom_bar(mapping=aes(x=date,y=import), stat="identity",fill="blue")+
geom_line(mapping=aes(x=date,y=Est.actual), colour="red")+
#geom_point(mapping=aes(x=date,y=value), size=0.1, colour="black")+
geom_line(mapping=aes(x=date,y=value,group=bootstrap), size=0.1, colour="black",alpha=0.3)
b = ggplot(test, aes(y=Fraction.observed,x=date))+geom_line()+ggrrr::gg_hide_X_axis()+ylab("P(obs)")
b+a+patchwork::plot_layout(ncol=1,heights = c(1,7))
gr = test %>% filter(bootstrap==2) %>% locfitGrowthEstimate()
ggplot(gr)+
geom_rect(aes(xmin=date,xmax=date+1,alpha=import),ymin=-Inf,ymax=Inf,fill="blue")+
scale_alpha_continuous(range=c(0,0.3))+
geom_line(aes(x=date,y=Growth.Quantile.0.5), colour="black")+
geom_ribbon(aes(x=date,ymin=Growth.Quantile.0.025,ymax=Growth.Quantile.0.975), fill="grey",alpha=0.2)+
geom_line(aes(x=date,y=Growth.actual), colour="red")+
coord_cartesian(ylim=c(-0.15,0.15))
growth = jepidemic::generateGrowthRate("test 1",breaks = c(0,40,80,200,300,364), rates=c(0,0.03,-0.01,0.01,-0.05,0))
ggplot()+
geom_line(data = growth$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = growth$events, mapping = aes(x=`Start date`, y=rates), colour="red")
rpois(15,25)
imported = growth %>% jepidemic::addImportations(tibble(time=c(1:10,201:205), import=rpois(15,25)))
ggplot() +
geom_bar(data=imported$ts, mapping=aes(x=date,y=import), stat="identity")
pois = imported %>% jepidemic::addPoissonRate()
ggplot() +
geom_bar(data=pois$ts, mapping=aes(x=date,y=import), stat="identity")+
geom_line(data=pois$ts, mapping=aes(x=date,y=Est.actual), colour="red")
weekend = pois %>% jepidemic::addObservedRate(observedFractionExpr = approx(x = c(0,40,n()-1), y=c(0.1,0.9,1), xout = 0:(n()-1))$y, weekendEffect = 0.05)
ggplot() +
geom_bar(data=weekend$ts, mapping=aes(x=date,y=import), stat="identity")+
geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.actual), colour="red")+
geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.observed), colour="blue")
weekend = pois %>% jepidemic::addObservedRate(observedFractionExpr = approx(x = c(0,40,n()-1), y=c(0.1,0.9,1), xout = 0:(n()-1))$y, weekendEffect = 0.05)
ggplot() +
geom_bar(data=weekend$ts, mapping=aes(x=date,y=import), stat="identity")+
geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.actual), colour="red")+
geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.observed), colour="blue")
ggplot(weekend$ts, aes(y=Fraction.observed,x=date))+geom_line()+ggrrr::gg_hide_X_axis()+ylab("P(obs)")
weekend = pois %>% jepidemic::addObservedRate(observedFractionExpr = approx(x = c(0,40,n()-1), y=c(0.1,0.9,1), xout = 0:(n()-1))$y, weekendEffect = 0.05)
a = ggplot() +
geom_bar(data=weekend$ts, mapping=aes(x=date,y=import), stat="identity")+
geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.actual), colour="red")+
geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.observed), colour="blue")
b = ggplot(weekend$ts, aes(y=Fraction.observed,x=date))+geom_line()+ylab("P(obs)")
a+ggrrr::gg_hide_X_axis()+b+patchwork::align_plots(ncol=1,heights=c(7,1))
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1,heights=c(7,1))
approx(x = c(0,40,n()-1), y=c(0.1,0.9,1), xout = 0:(n()-1))
weekend = pois %>% jepidemic::addObservedRate(observedFractionExpr = approx(x = c(0,40,n()-1), y=c(0.1,0.9,1), xout = 0:(n()-1))$y, weekendEffect = 0.05)
a = ggplot() +
geom_bar(data=weekend$ts, mapping=aes(x=date,y=import), stat="identity")+
geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.actual), colour="red")+
geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.observed), colour="blue")
b = ggplot(weekend$ts, aes(y=Fraction.observed,x=date))+geom_line()+ylab("P(obs)")
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1,heights=c(7,1))
ggplot(weekend$ts, aes(y=Fraction.observed,x=date))+geom_line()+ylab("P(obs)")+ylim(c(0,1))
weekend = pois %>% jepidemic::addObservedRate(observedFractionExpr = approx(x = c(0,40,n()-1), y=c(0.1,0.9,1), xout = 0:(n()-1))$y, weekendEffect = 0.05)
a = ggplot() +
geom_bar(data=weekend$ts, mapping=aes(x=date,y=import), stat="identity")+
geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.actual), colour="red")+
geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.observed), colour="blue")
b = ggplot(weekend$ts, aes(y=Fraction.observed,x=date))+geom_line()+ylab("P(obs)")+ylim(c(0,1))
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1,heights=c(7,1))
#devtools::load_all()
vignetteDataset = weekend %>% jepidemic::addBootstrappedObservations(bootstraps = 3,delayMean = 1.5,delaySd = 2.5,lastObservation = c(50,100,200,364))
ggplot() +
#geom_bar(data=weekend$ts, mapping=aes(x=date,y=import), stat="identity")+
#geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.actual), colour="red")+
#geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.observed), colour="blue")+
geom_point(data=vignetteDataset$ts, mapping=aes(x=date,y=value, colour=as.factor(observationDate), group=bootstrap), size=0.1)+
facet_wrap(vars(observationDate))
usethis::use_data(vignetteDataset,overwrite = TRUE)
# J$Serialiser$serialiseDataframe(lagAnalysisDataset$ts,here::here("../src/main/resources/vignetteDataframe.ser"))
ggplot() +
#geom_bar(data=weekend$ts, mapping=aes(x=date,y=import), stat="identity")+
#geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.actual), colour="red")+
#geom_line(data=weekend$ts, mapping=aes(x=date,y=Est.observed), colour="blue")+
geom_point(data=vignetteDataset$ts, mapping=aes(x=date,y=value, colour=as.factor(observationDate), group=bootstrap), size=0.1)+
facet_wrap(vars(observationDate))+
guides(color = guide_none())
ggplot()+
geom_line(data=vignetteDataset$ts, aes(x=date,y=Fraction.observed,colour="observed"))+
geom_line(data=vignetteDataset$ts, aes(x=date,y=Fraction.weekend,colour="weekend"))+
geom_line(data=vignetteDataset$ts, aes(x=date,y=Fraction.available,colour="available"))+
facet_wrap(vars(observationDate))+ylab("fraction")
?jepidemic::addBootstrappedObservations
jepidemic::addBootstrappedObservations
jepidemic::addObservedRate()
jepidemic::addObservedRate
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0)
ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
source('~/Git/jepidemic/r-library/R/synthetic-datasets.R')
source('~/Git/jepidemic/r-library/R/synthetic-datasets.R')
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=101)
ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=102)
ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=103)
ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=104)
ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")
ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")
glimpse(simpleDataset$ts)
ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")
ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+xlab("Expected cases")
ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Expected cases")
ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Expected cases")+
geom_point(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1)
ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Expected cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.2)
ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Expected cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)
ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Expected cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_Y_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_Y_axis()+b+patchwork::plot_layout(ncol=1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
source('~/Git/jepidemic/r-library/R/synthetic-datasets.R')
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
devtools::load_all()
knitr::opts_chunk$set(echo = TRUE)
here::i_am("vignettes/generating-synthetic-datasets.Rmd")
source(here::here("vignettes/common-setup.R"))
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=101)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=102)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=103)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=104)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=105)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=106)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=107)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=108)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
simpleDataset = jepidemic::getGrowthRateBasedDataset(bootstraps = 10,weekendEffect = 0, seed=109)
a = ggplot()+
geom_line(data = simpleDataset$ts, mapping = aes(x=date, y=Growth.actual), colour="red")+
geom_point(data = simpleDataset$events, mapping = aes(x=`Start date`, y=rates), colour="red")
b = ggplot() +
geom_bar(data=simpleDataset$ts, mapping=aes(x=date,y=import), stat="identity", position = "dodge")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=Est.actual), colour="red")+ylab("Cases")+
geom_line(data=simpleDataset$ts, mapping=aes(x=date,y=value), colour="black",size=0.1,alpha=0.3)+
geom_point(data=simpleDataset$ts %>% filter(bootstrap==1), mapping=aes(x=date,y=value), colour="black",size=0.1)
a+ggrrr::gg_hide_X_axis()+b+patchwork::plot_layout(ncol=1)
usethis::use_data(simpleDataset,overwrite = TRUE)
J$Serialiser$serialiseDataframe(simpleDataset$ts,here::here("../src/main/resources/simpleDataframe.ser"))
?requireNamespace
